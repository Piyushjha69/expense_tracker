{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/expenseTracker/frontend/app/%28auth%29/login/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useRouter } from \"next/navigation\";\nimport Link from \"next/link\";\nimport { ArrowLeft } from \"lucide-react\";\nimport { useAuth } from \"../lib/useAuth\";\nimport { useState } from \"react\";\nimport { apiFetch } from \"../lib/api\";\nimport { setAccessToken, setRefreshToken } from \"../lib/auth\";\nimport { toast } from \"sonner\";\n\nexport default function loginPage() {\n    const router = useRouter();\n    const { isLoading: authLoading } = useAuth(false)\n    const [email, setEmail] = useState(\"\")\n    const [password, setPassword] = useState(\"\")\n    const [loading, setLoading] = useState(false)\n    const [errors, setErrors] = useState<{ email?:string; password?:string}>({})\n\n    function validateForm () {\n        const newErrors : { email?:string; password?:string } = {}\n\n        if (!email.trim()){\n            newErrors.email = \"Email is required\"\n        } else if (!/^[^\\s@]+@[^\\s@]+.[^\\s@]+$/.test(email)) {  // Regex E-mail validation (checks email format)\n            newErrors.email = \"Please enter a valid E-mail\" \n        }\n\n        if (!password) {\n            newErrors.password = \"Password is required\"\n        } else if ( password.length < 6 ) {\n            newErrors.password = \"Password must be at least 6 characters\"\n        }\n\n        setErrors (newErrors)\n        return Object.keys(newErrors).length === 0;\n    }\n\n    async function handleLogin (e: React.FormEvent) {\n        e.preventDefault();\n\n        if (!validateForm()) return \n\n        setLoading(true)\n\n        try {\n            const res = await apiFetch(\"/auth/login\", {\n                method: \"POST\",\n                body: JSON.stringify({ email, password})\n            })\n\n            const data = await res.json()\n            if(!data.success) throw new Error(data.message || \"Login failed\")\n\n            const tokens = data.data.tokens\n            setAccessToken(tokens.accessToken)\n            setRefreshToken(tokens.refershToken)\n\n            toast.success(\"Login successful!\")\n            router.push(\"/expense\")\n        } catch (err: any) {\n            toast.error(err.message || \"Login Failed\")\n        } finally {\n            setLoading(false)\n        }\n    }\n\n    if (authLoading) {\n        return  (\n            <div>\n                <div />\n            </div>\n        )\n    }\n\n    if (authLoading) {\n        return (\n            <div className=\"flex items-center justify-center min-h-screen\">\n                <div className=\"text-center\">Loading...</div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800\">\n            <header className=\"border-b border-slate-700 bg-slate-900/50 backdrop-blur-sm\">\n                <div className=\"max-w-md mx-auto px-4 py-6\">\n                    <Link\n                        href=\"/\"\n                        className=\"flex items-center gap-2 text-sm text-slate-400 hover:text-slate-200 transition-colors\"\n                    >\n                        <ArrowLeft size={16} />\n                        Back\n                    </Link>\n                </div>\n            </header>\n\n            <div className=\"flex-1 flex items-center justify-center px-4 py-8\">\n                <div className=\"w-full max-w-md\">\n                    <div className=\"bg-slate-800 rounded-lg border border-slate-700 p-6\">\n                        <h1 className=\"text-2xl font-bold text-white mb-6\">Sign In</h1>\n                        <form onSubmit={handleLogin} className=\"space-y-4\">\n                            <div>\n                                <input\n                                    placeholder=\"Email\"\n                                    type=\"email\"\n                                    value={email}\n                                    onChange={(e) => {\n                                        setEmail(e.target.value);\n                                        if (errors.email)\n                                            setErrors({ ...errors, email: undefined });\n                                    }}\n                                    className=\"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded text-white placeholder-slate-400 focus:outline-none focus:border-blue-500\"\n                                />\n                                {errors.email && (\n                                    <p className=\"text-red-400 text-sm mt-1\">{errors.email}</p>\n                                )}\n                            </div>\n\n                            <div>\n                                <input\n                                    placeholder=\"Password\"\n                                    type=\"password\"\n                                    value={password}\n                                    onChange={(e) => {\n                                        setPassword(e.target.value);\n                                        if (errors.password)\n                                            setErrors({ ...errors, password: undefined });\n                                    }}\n                                    className=\"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded text-white placeholder-slate-400 focus:outline-none focus:border-blue-500\"\n                                />\n                                {errors.password && (\n                                    <p className=\"text-red-400 text-sm mt-1\">{errors.password}</p>\n                                )}\n                            </div>\n\n                            <button\n                                disabled={loading}\n                                className=\"w-full px-3 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-600 text-white rounded font-medium transition-colors\"\n                            >\n                                {loading ? \"Signing in...\" : \"Sign In\"}\n                            </button>\n                        </form>\n\n                        <p className=\"text-center mt-4 text-sm text-slate-400\">\n                            Don&apos;t have an account?{\" \"}\n                            <Link href=\"/register\" className=\"text-blue-400 hover:text-blue-300\">\n                                Register\n                            </Link>\n                        </p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n"],"names":[],"mappings":"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"}}]
}