{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-dom.ts","../../../../app/lib/useAuth.ts","../../../../app/%28auth%29/login/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactServerDOMTurbopackClient\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactDOM\n","\"use client\"\n\nimport { usePathname, useRouter } from \"next/navigation\";\nimport { useEffect, useState } from \"react\";\nimport { getAccessToken } from \"./auth\";\n\nconst PUBLIC_ROUTES = [\"/login\", \"/register\"]\n\nexport function useAuth (requireAuth: boolean = true) {\n    const router = useRouter()\n    const pathname = usePathname()\n    const [isLoading, setIsLoading] = useState(true)\n    const [isAuthenticated, setIsAuthenticated] = useState(false)\n\n    useEffect(() => {\n        const token = getAccessToken()\n        const hasToken = !!token\n\n        setIsAuthenticated(hasToken)\n\n        if (requireAuth && !hasToken) {\n            //User needs to be authenticated\n            router.replace(\"/login\")\n        } else if (!requireAuth && hasToken && PUBLIC_ROUTES.includes(pathname)) {\n            router.replace(\"/expense\")\n        } else {\n            setIsLoading(false)\n        }\n    }, [requireAuth, router, pathname])\n\n    return {isLoading, isAuthenticated}\n}","\"use client\"\n\nimport { useRouter } from \"next/navigation\";\nimport Link from \"next/link\";\nimport { ArrowLeft } from \"lucide-react\";\nimport { useAuth } from \"../../lib/useAuth\";\nimport { useState } from \"react\";\nimport { apiFetch } from \"../../lib/api\";\nimport { setAccessToken, setRefreshToken } from \"../../lib/auth\";\nimport { toast } from \"sonner\";\n\nexport default function loginPage() {\n    const router = useRouter();\n    const { isLoading: authLoading } = useAuth(false)\n    const [email, setEmail] = useState(\"\")\n    const [password, setPassword] = useState(\"\")\n    const [loading, setLoading] = useState(false)\n    const [errors, setErrors] = useState<{ email?:string; password?:string}>({})\n\n    function validateForm () {\n        const newErrors : { email?:string; password?:string } = {}\n\n        if (!email.trim()){\n            newErrors.email = \"Email is required\"\n        } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)) {  // Regex E-mail validation (checks email format)\n            newErrors.email = \"Please enter a valid E-mail\" \n        }\n\n        if (!password) {\n            newErrors.password = \"Password is required\"\n        } else if ( password.length < 6 ) {\n            newErrors.password = \"Password must be at least 6 characters\"\n        }\n\n        setErrors (newErrors)\n        return Object.keys(newErrors).length === 0;\n    }\n\n    async function handleLogin (e: React.FormEvent) {\n        e.preventDefault();\n\n        if (!validateForm()) return \n\n        setLoading(true)\n\n        try {\n            const res = await apiFetch(\"/auth/login\", {\n                method: \"POST\",\n                body: JSON.stringify({ email, password})\n            })\n\n            const data = await res.json()\n            if(!data.success) throw new Error(data.message || \"Login failed\")\n\n            const tokens = data.data.tokens\n            setAccessToken(tokens.accessToken)\n            setRefreshToken(tokens.refreshToken)\n\n            toast.success(\"Login successful!\")\n            router.push(\"/expense\")\n        } catch (err: any) {\n            toast.error(err.message || \"Login Failed\")\n        } finally {\n            setLoading(false)\n        }\n    }\n\n    if (authLoading) {\n        return (\n            <div className=\"flex items-center justify-center min-h-screen\">\n                <div className=\"text-center\">Loading...</div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800\">\n            <header className=\"border-b border-slate-700 bg-slate-900/50 backdrop-blur-sm\">\n                <div className=\"max-w-md mx-auto px-4 py-6\">\n                    <Link\n                        href=\"/\"\n                        className=\"flex items-center gap-2 text-sm text-slate-400 hover:text-slate-200 transition-colors\"\n                    >\n                        <ArrowLeft size={16} />\n                        Back\n                    </Link>\n                </div>\n            </header>\n\n            <div className=\"flex-1 flex items-center justify-center px-4 py-8\">\n                <div className=\"w-full max-w-md\">\n                    <div className=\"bg-slate-800 rounded-lg border border-slate-700 p-6\">\n                        <h1 className=\"text-2xl font-bold text-white mb-6\">Sign In</h1>\n                        <form onSubmit={handleLogin} className=\"space-y-4\">\n                            <div>\n                                <input\n                                    placeholder=\"Email\"\n                                    type=\"email\"\n                                    value={email}\n                                    onChange={(e) => {\n                                        setEmail(e.target.value);\n                                        if (errors.email)\n                                            setErrors({ ...errors, email: undefined });\n                                    }}\n                                    className=\"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded text-white placeholder-slate-400 focus:outline-none focus:border-blue-500\"\n                                />\n                                {errors.email && (\n                                    <p className=\"text-red-400 text-sm mt-1\">{errors.email}</p>\n                                )}\n                            </div>\n\n                            <div>\n                                <input\n                                    placeholder=\"Password\"\n                                    type=\"password\"\n                                    value={password}\n                                    onChange={(e) => {\n                                        setPassword(e.target.value);\n                                        if (errors.password)\n                                            setErrors({ ...errors, password: undefined });\n                                    }}\n                                    className=\"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded text-white placeholder-slate-400 focus:outline-none focus:border-blue-500\"\n                                />\n                                {errors.password && (\n                                    <p className=\"text-red-400 text-sm mt-1\">{errors.password}</p>\n                                )}\n                            </div>\n\n                            <button\n                                disabled={loading}\n                                className=\"w-full px-3 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-600 text-white rounded font-medium transition-colors\"\n                            >\n                                {loading ? \"Signing in...\" : \"Sign In\"}\n                            </button>\n                        </form>\n\n                        <p className=\"text-center mt-4 text-sm text-slate-400\">\n                            Don&apos;t have an account?{\" \"}\n                            <Link href=\"/register\" className=\"text-blue-400 hover:text-blue-300\">\n                                Register\n                            </Link>\n                        </p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n"],"names":["module","exports","require","vendored","React","AppRouterContext","HooksClientContext","ServerInsertedHtml","process","env","NEXT_RUNTIME","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","ReactJsxRuntime","ReactServerDOMTurbopackClient","ReactDOM"],"mappings":"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","ignoreList":[0,1,2,3,4,5,6,7]}